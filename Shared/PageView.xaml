<?xml version="1.0" encoding="UTF-8"?>
<ContentView
    xmlns="http://xamarin.com/schemas/2014/forms"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:pbXForms="clr-namespace:pbXForms"
    xmlns:local="clr-namespace:SafeNotebooks"
    x:Class="SafeNotebooks.PageView">

    <pbXForms:ContentPageExGrid
        x:Name="_PageView">

        <pbXForms:ContentPageExToolBar
            Grid.Row="0"
            Grid.Column="0"
            x:Name="_AppBarRow"
            BackgroundColor="{StaticResource AppBarBackgroundColor}">

            <pbXForms:FlatButton
                x:Name="BackBtn"
                Image="ic_arrow_back.png"
                Clicked="BackBtn_Clicked" />

            <StackLayout
                Orientation="Vertical"
                VerticalOptions="CenterAndExpand"
                HorizontalOptions="FillAndExpand"
                Padding="0"
                Margin="0"
                Spacing="0">

                <Label
                    x:Name="SelectedPageName"
                    Text=""
                    TextColor="{StaticResource AppBarTextColor}"
                    VerticalOptions="Center"
                    HorizontalOptions="FillAndExpand" />

                <Label
                    x:Name="SelectedPageParentName"
                    Text=""
                    FontSize="Micro"
                    TextColor="{StaticResource ListItemDetailColor}"
                    VerticalOptions="Center" />

            </StackLayout>

            <pbXForms:FlatButton
                x:Name="EditBtn"
                Image="ic_mode_edit.png"
                Clicked="EditBtn_Clicked" />

        </pbXForms:ContentPageExToolBar>

        <pbXForms:ContentPageExContent
            Grid.Row="1"
            Grid.Column="0"
            x:Name="_ContentRow">

            <ListView
                x:Name="ListCtl"
                BackgroundColor="{StaticResource ListOfNotesBackgroundColor}"
                SeparatorColor="{StaticResource ListItemDividerColor}">

                <ListView.ItemTemplate>

                    <DataTemplate>

                        <TextCell
                            Text="{Binding DisplayName}"
                            TextColor="{StaticResource ListItemTextColor}"
                            Detail="{Binding DisplayDetail}"
                            DetailColor="{StaticResource ListItemDetailColor}">

                            <TextCell.ContextActions>

                                <MenuItem
                                    Clicked="MoveItemBtn_Clicked"
                                    CommandParameter="{Binding .}"
                                    Text="Move" />

                                <MenuItem
                                    Clicked="DeleteItemBtn_Clicked"
                                    CommandParameter="{Binding .}"
                                    IsDestructive="True"
                                    Text="Delete" />

                            </TextCell.ContextActions>

                        </TextCell>

                    </DataTemplate>

                </ListView.ItemTemplate>

            </ListView>

        </pbXForms:ContentPageExContent>

        <pbXForms:ContentPageExToolBar
            Grid.Row="2"
            Grid.Column="0"
            x:Name="_ToolBarRow"
            BackgroundColor="{StaticResource PageViewToolBarBackgroundColor}">

            <Grid
                Padding="0"
                Margin="0"
                ColumnSpacing="0"
                RowSpacing="0"
                HorizontalOptions="FillAndExpand">

                <Grid.ColumnDefinitions>

                    <ColumnDefinition
                        Width="{x:Static pbXForms:Metrics.TouchTargetHeight}" />

                    <ColumnDefinition
                        Width="*" />

                    <ColumnDefinition
                        Width="*" />

                    <ColumnDefinition
                        Width="{x:Static pbXForms:Metrics.TouchTargetHeight}" />

                </Grid.ColumnDefinitions>

                <pbXForms:FlatButton
                    Grid.Row="0"
                    Grid.Column="1"
                    WidthRequest="-1"
                    Text="New: Note"
                    FontAttributes="Bold"
                    TextColor="{StaticResource AccentTextColor}"
                    Clicked="FavoriteNewBtn_Clicked" />

                <pbXForms:FlatButton
                    Grid.Row="0"
                    Grid.Column="2"
                    WidthRequest="-1"
                    Text="New..."
                    TextColor="{StaticResource ToolBarTextColor}"
                    Clicked="NewBtn_Clicked" />

                <!--
                <pbXForms:FlatButton
                    Grid.Row="0"
                    Grid.Column="2"
                    Image="ic_sort.png"
                    Clicked="SortBtn_Clicked" />
                -->
            </Grid>

        </pbXForms:ContentPageExToolBar>

    </pbXForms:ContentPageExGrid>

</ContentView>
