<?xml version="1.0" encoding="UTF-8"?>
<ContentView
    xmlns="http://xamarin.com/schemas/2014/forms"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:pbXForms="clr-namespace:pbXForms"
    xmlns:local="clr-namespace:SafeNotebooks"
    x:Class="SafeNotebooks.NotebooksView">

    <pbXForms:ContentPageExGrid
        x:Name="_NotebooksView">

        <pbXForms:ContentPageExAppBar
            Grid.Row="0"
            Grid.Column="0"
            x:Name="_AppBarRow"
            BackgroundColor="{StaticResource AppBarBackgroundColor}">

            <pbXForms:FlatButton
                x:Name="BackBtn"
				IsVisible="false"
                Image="ic_arrow_back.png"
                Clicked="BackBtn_Clicked" />

            <Label
                x:Name="AppTitle"
                Text="Safe Notebooks"
                FontAttributes="Bold"
                TextColor="{StaticResource AccentTextColor}"
                VerticalOptions="Center"
                HorizontalOptions="FillAndExpand" />

            <pbXForms:FlatButton
                x:Name="SearchBtn"
                Image="ic_search.png"
                Clicked="SearchBtn_Clicked" />

            <pbXForms:FlatButton
                x:Name="SettingsBtn"
                Image="ic_settings.png"
                Clicked="SettingsBtn_Clicked" />

        </pbXForms:ContentPageExAppBar>

        <pbXForms:ContentPageExContent
            Grid.Row="1"
            Grid.Column="0"
            x:Name="_ContentRow">

            <StackLayout
                x:Name="SelectedNotebookBar"
                IsVisible="false"
                Orientation="Horizontal"
                HorizontalOptions="Fill"
                Padding="0"
                Spacing="{x:Static pbXForms:Metrics.ToolBarItemsSpacing}"
                HeightRequest="{x:Static pbXForms:Metrics.ToolBarHeightLandscape}"
                BackgroundColor="{StaticResource NotebooksListBackgroundColor}">

                <Label
                    x:Name="SelectedNotebookName"
                    Text="Notebooks"
                    TextColor="{StaticResource ListItemTextColor}"
                    VerticalOptions="Center"
                    HorizontalOptions="CenterAndExpand" />

                <pbXForms:FlatButton
                    Image="ic_mode_edit.png"
                    Clicked="EditBtn_Clicked" />

            </StackLayout>

            <ListView
                x:Name="ListCtl"
                BackgroundColor="{StaticResource NotebooksListBackgroundColor}"
                SeparatorColor="{StaticResource ListItemDividerColor}">

                <ListView.ItemTemplate>

                    <DataTemplate>

                        <TextCell
                            Text="{Binding DisplayName}"
                            TextColor="{StaticResource ListItemTextColor}"
                            Detail="{Binding DisplayDetail}"
                            DetailColor="{StaticResource ListItemDetailColor}">

                            <TextCell.ContextActions>

                                <MenuItem
                                    Clicked="EditItemBtn_Clicked"
                                    CommandParameter="{Binding .}"
                                    Text="Edit" />

                                <MenuItem
                                    Clicked="MoveItemBtn_Clicked"
                                    CommandParameter="{Binding .}"
                                    Text="Move" />
                                
                                <MenuItem
                                    Clicked="DeleteItemBtn_Clicked"
                                    CommandParameter="{Binding .}"
                                    IsDestructive="True"
                                    Text="Delete" />

                            </TextCell.ContextActions>

                        </TextCell>

                    </DataTemplate>

                </ListView.ItemTemplate>

            </ListView>

        </pbXForms:ContentPageExContent>

        <pbXForms:ContentPageExToolBar
            Grid.Row="2"
            Grid.Column="0"
            x:Name="_ToolBarRow"
            BackgroundColor="{StaticResource NotebooksViewToolBarBackgroundColor}">

            <Grid
                Padding="0"
                Margin="0"
                ColumnSpacing="0"
                RowSpacing="0"
                HorizontalOptions="FillAndExpand">

                <Grid.ColumnDefinitions>

                    <ColumnDefinition
                        Width="{x:Static pbXForms:Metrics.TouchTargetHeight}" />

                    <ColumnDefinition
                        Width="*" />

                    <ColumnDefinition
                        Width="{x:Static pbXForms:Metrics.TouchTargetHeight}" />

                </Grid.ColumnDefinitions>

                <pbXForms:FlatButton
                    x:Name="NewBtn"
                    Grid.Row="0"
                    Grid.Column="1"
					WidthRequest="-1"
                    Text=""
                    TextColor="{StaticResource AccentTextColor}"
                    FontAttributes="Bold"
                    Clicked="NewBtn_Clicked" />

                <!--
                <pbXForms:FlatButton
                    Grid.Row="0"
                    Grid.Column="2"
                    x:Name="SortBtn"
                    Image="ic_sort.png"
                    Clicked="SortBtn_Clicked" />
                -->
            </Grid>

        </pbXForms:ContentPageExToolBar>

    </pbXForms:ContentPageExGrid>

</ContentView>
